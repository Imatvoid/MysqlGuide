## 数据库四大特性和隔离级别


### 四大特性

Atomicity 原子性  
事务是数据库的逻辑工作单位，事务中包括的诸操作要么全做，要么全不做。


Consistency 一致性    
事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态。一致性与原子性是密切相关的。


Isolation 隔离性  
一个事务的执行不能被其他事务干扰。


Durability 持续性  
一个事务一旦提交，它对数据库中数据的改变就应该是永久性的。


### 隔离级别

#### Read uncommitted 读未提交（脏读 不可重复读 幻读） 

脏读是两个并发的事务，“事务A：领导发工资”、“事务B：我查询工资账户”，事务B读取了事务A尚未提交的数据。


#### Read committed   读提交  （不可重复读 幻读）

我拿着工资卡去消费，系统读取到卡里确实有2000元，而此时老婆也正好在网上转账，把工资卡的

2000元转到她账户，并在我之前提交了事务，当我扣款时，系统检查到工资卡已经没有钱，扣款失败，

十分纳闷，明明卡里有钱，为何......

不可重复读是两个并发的事务，“事务A：消费”、“事务B：老婆网上转账”，

事务A事先读取了数据，事务B紧接了更新了数据，并提交了事务，而事务A再次读取该数据时，数据已经发生了改变。

#### Repeatable read  重复读  （幻读）

实现方式 锁行

当隔离级别设置为Repeatable read时，可以避免不可重复读。当我拿着工资卡去消费时，

一旦系统开始读取工资卡信息（即事务开始），我老婆就不可能对该记录进行修改，也就是不能在此时转账。

虽然Repeatable read避免了不可重复读，但还有可能出现幻读。

例如：老婆工作在银行部门，她时常通过银行内部系统查看我的信用卡消费记录。

有一天，她正查询到我当月信用卡的总消费金额（select

sum(amount) from transaction where month =本月）为80元，

而我此时正好在外面吃完大餐后在收银台买单，消费1000元，即新增了一条1000元的消费记录（insert
transaction ...），并提交了事务，

随后老婆将我的当月信用卡消费的明细打印到A4纸上，却发现消费总额为1080元，

老婆很诧异，以为出现了幻觉，幻读就这样产生了。



#### Serializable    串行化   （无问题）

实现方式 锁表 





   
